<h1>Public::Jobs#index</h1>
<p>Find me in app/views/public/jobs/index.html.erb</p>
<h3><%= (@week.monday).day %>日～<%= (@week.sunday).day %>日のシフト希望</h3>

<p>ログインユーザがこの週出したか：<%= Job.exists?(week_id: @week.id, user_id: @user.id) %></p>
<hr>

<h3>希望提出</h3>
<%= form_with model:[@week, @job], url: week_jobs_path(@week.id), method: :post do |f| %>
  <table class="table table-bordered table-hover">
    <thead>
      <tr class="table-secondary">
        <th></th>
        <th class="<%= holiday_class(@week.monday) %>"><%= day_header(@week.monday) %></th>
        <th class="<%= holiday_class(@week.tuesday) %>"><%= day_header(@week.tuesday) %></th>
        <th class="<%= holiday_class(@week.wednesday) %>"><%= day_header(@week.wednesday) %></th>
        <th class="<%= holiday_class(@week.thursday) %>"><%= day_header(@week.thursday) %></th>
        <th class="<%= holiday_class(@week.friday) %>"><%= day_header(@week.friday) %></th>
        <th class="<%= holiday_class(@week.saturday) || 'text-primary' %>"><%= day_header(@week.saturday) %></th>
        <th class="text-danger"><%= day_header(@week.sunday) %></th>
        <th>備考</th>
        <th></th>
      </tr>
      <tr class="table-secondary">
        <th></th>
        <th class="<%= holiday_class(@week.monday) %>">月</th>
        <th class="<%= holiday_class(@week.tuesday) %> fw-bold">火</th>
        <th class="<%= holiday_class(@week.wednesday) %> fw-bold">水</th>
        <th class="<%= holiday_class(@week.thursday) %> fw-bold">木</th>
        <th class="<%= holiday_class(@week.friday) %> fw-bold">金</th>
        <th class="<%= holiday_class(@week.saturday) || 'text-primary' %> fw-bold">土</th>
        <th class="text-danger fw-bold">日</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><%= @user.full_name %></td>
        <td><%= f.text_area :time1 ,class: 'form-control' %></td>
        <td><%= f.text_area :time2 ,class: 'form-control' %></td>
        <td><%= f.text_area :time3 ,class: 'form-control' %></td>
        <td><%= f.text_area :time4 ,class: 'form-control' %></td>
        <td><%= f.text_area :time5 ,class: 'form-control' %></td>
        <td><%= f.text_area :time6 ,class: 'form-control' %></td>
        <td><%= f.text_area :time7 ,class: 'form-control' %></td>
        <td><%= f.text_area :comment ,class: 'form-control' %></td>
        <td><%= f.submit '提出', class: 'btn btn-primary' %></td>
      </tr>
    </tbody>
  </table>
<% end %>

<h3>希望一覧</h3>
<table class="table table-bordered table-hover">
  <thead>
    <tr class="table-secondary">
      <th></th>
      <th class="<%= holiday_class(@week.monday) %>"><%= day_header(@week.monday) %></th>
      <th class="<%= holiday_class(@week.tuesday) %>"><%= day_header(@week.tuesday) %></th>
      <th class="<%= holiday_class(@week.wednesday) %>"><%= day_header(@week.wednesday) %></th>
      <th class="<%= holiday_class(@week.thursday) %>"><%= day_header(@week.thursday) %></th>
      <th class="<%= holiday_class(@week.friday) %>"><%= day_header(@week.friday) %></th>
      <th class="<%= holiday_class(@week.saturday) || 'text-primary' %>"><%= day_header(@week.saturday) %></th>
      <th class="text-danger"><%= day_header(@week.sunday) %></th>
      <th>備考</th>
      <th></th>
    </tr>
    <tr class="table-secondary">
      <th></th>
      <th class="<%= holiday_class(@week.monday) %>">月</th>
      <th class="<%= holiday_class(@week.tuesday) %> fw-bold">火</th>
      <th class="<%= holiday_class(@week.wednesday) %> fw-bold">水</th>
      <th class="<%= holiday_class(@week.thursday) %> fw-bold">木</th>
      <th class="<%= holiday_class(@week.friday) %> fw-bold">金</th>
      <th class="<%= holiday_class(@week.saturday) || 'text-primary' %> fw-bold">土</th>
      <th class="text-danger fw-bold">日</th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
    <tr class="">
      <td><%= user.full_name %></td>
      <td><%= (@jobs[user.id] || []).first&.time1 %></td>
      <td><%= (@jobs[user.id] || []).first&.time2 %></td>
      <td><%= (@jobs[user.id] || []).first&.time3 %></td>
      <td><%= (@jobs[user.id] || []).first&.time4 %></td>
      <td><%= (@jobs[user.id] || []).first&.time5 %></td>
      <td><%= (@jobs[user.id] || []).first&.time6 %></td>
      <td><%= (@jobs[user.id] || []).first&.time7 %></td>
      <td></td>
      <td></td>
    </tr>
    <% end %>
  </tbody>
</table>
